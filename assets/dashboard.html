<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dashboard - Python Casino</title>
<style>
:root {
  --bg: #0c0f14;
  --card: #151a22;
  --accent: #00d4ff;
  --accent-2: #8a2be2;
  --text: #e8eef6;
  --muted: #9aa7b2;
}

html, body {
  min-height: 100%;
}

body {
  margin: 0;
  background: radial-gradient(1200px 800px at 20% 10%, rgba(138,43,226,.25), transparent 60%), radial-gradient(1000px 700px at 80% 90%, rgba(0,212,255,.2), transparent 60%), var(--bg);
  font-family: system-ui, "Segoe UI", Roboto, sans-serif;
  color: var(--text);
  overflow-y: auto;
  padding-bottom: 40px;
}

.navbar {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 20px 40px;
  background: rgba(255,255,255,.03);
  backdrop-filter: blur(10px);
  border-bottom: 1px solid rgba(255,255,255,.08);
}

.logo {
  font-size: 22px;
  font-weight: 600;
  color: var(--accent);
}

.main {
  max-width: 700px;
  margin: 60px auto;
  padding: 24px;
  background: rgba(255,255,255,.04);
  border: 1px solid rgba(255,255,255,.08);
  border-radius: 16px;
  backdrop-filter: blur(6px);
  box-shadow: 0 10px 30px rgba(0,0,0,.35);
}

h1 {
  font-size: 26px;
  margin-bottom: 16px;
}

.info {
  margin-bottom: 30px;
}

.info-item {
  display: flex;
  justify-content: space-between;
  padding: 8px 0;
  border-bottom: 1px solid rgba(255,255,255,.06);
}

.actions {
  display: flex;
  gap: 16px;
  margin-top: 20px;
}

.btn {
  padding: 12px 20px;
  border: none;
  border-radius: 10px;
  font-weight: 600;
  color: #0a0f14;
  cursor: pointer;
}

.btn-primary {
  background: linear-gradient(135deg, var(--accent), #4de2ff);
}

.btn-secondary {
  background: linear-gradient(135deg, var(--accent-2), #b07cff);
}

.footer {
  text-align: center;
  margin-top: 60px;
  padding: 20px;
  color: var(--muted);
  font-size: 13px;
}
/* history */
.history {
  margin: 24px 0 0 0;
}
.history h2 {
  font-size: 20px;
  margin-bottom: 10px;
}
.history-card {
  margin-top: 12px;
  background: rgba(255,255,255,.04);
  border: 1px solid rgba(255,255,255,.08);
  border-radius: 12px;
  backdrop-filter: blur(6px);
  box-shadow: 0 8px 20px rgba(0,0,0,.25);
  max-height: 420px;
  overflow-y: auto;
}
.history-card::-webkit-scrollbar { width: 10px; }
.history-card::-webkit-scrollbar-thumb { background: rgba(255,255,255,.15); border-radius: 8px; }
.history-card::-webkit-scrollbar-track { background: transparent; }
.history-list {
  list-style: none;
  padding: 0;
  margin: 0;
}
.history-item {
  display: grid;
  grid-template-columns: 1fr auto;
  gap: 12px;
  align-items: center;
  padding: 12px 16px;
  border-bottom: 1px solid rgba(255,255,255,.06);
  font-size: 14px;
}
.history-item:first-child { border-top-left-radius: 12px; border-top-right-radius: 12px; }
.history-item:last-child { border-bottom: none; }
.history-item:nth-child(odd) { background: rgba(255,255,255,.02); }
.amt-pos { color: #00e676; font-weight: 700; }
.amt-neg { color: #ff6b6b; font-weight: 700; }
.amt-neutral { color: var(--muted); font-weight: 700; }
</style>
</head>
<body>
<nav class="navbar">
  <div class="logo">Casino Dashboard</div>
  <div>Welcome, {{ username }} | <a href="/logout" style="color: var(--accent); text-decoration: none;">Logout</a></div>
</nav>

<div class="main">
  <h1>Your Account Overview</h1>
  <div class="info">
    <div class="info-item"><span>Username:</span><span>{{ username }}</span></div>
    <div class="info-item"><span>Current Balance:</span><span>${{ "%.2f"|format(balance) }}</span></div>
    <div class="info-item"><span>Total Money Won:</span><span>${{ "%.2f"|format(money_won) }}</span></div>
    <div class="info-item"><span>Total Money Lost:</span><span>${{ "%.2f"|format(money_lost) }}</span></div>
  </div>

  <div class="actions">
    <button class="btn btn-secondary" onclick="window.location.href='/lobby'">Return to Lobby</button>
  </div>
</div>

<div class="main">
  <div class="history">
    <h2>Recent Activity</h2>
    <div class="history-card">
    <ul class="history-list">
      {% if history and history|length > 0 %}
        {% for item in history|reverse %}
          <li class="history-item">
            <span>{{ item.timestamp }} — {{ item.game|default('n/a') }} {{ item.result|default('') }}</span>
            {% set amt = item.amount %}
            {% if amt > 0 %}
              <span class="amt-pos">+${{ '%.2f'|format(amt) }}</span>
            {% elif amt < 0 %}
              <span class="amt-neg">-${{ '%.2f'|format(0 - amt) }}</span>
            {% else %}
              <span class="amt-neutral">$0.00</span>
            {% endif %}
          </li>
        {% endfor %}
      {% else %}
        <li class="history-item"><span>No activity yet.</span><span class="amt-neutral">—</span></li>
      {% endif %}
    </ul>
    </div>
  </div>
</div>

</body>
</html>